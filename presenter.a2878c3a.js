function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequirec771,r=t.register;r("7xkmY",function(e,r){var o=t("e3h3F"),n=t("bOScl"),a=t("Z8IgN"),s=t("klC2j"),c=t("3OX67"),i=t("bt1BM"),l=t("021eu");let u=new n.default,d=new a.default,f=new o.default(u,d),m=new c.default(u),h=new i.default(d),g=document.querySelector("#balance-div"),b=()=>{let e=f.calcularBalance();g.innerHTML=`<p>Balance: ${e}</p>`},p=document.querySelector("#gastos-form"),v=document.querySelector("#gastos-div");document.querySelector("#historial-div");let y=(e=[])=>{v.innerHTML="<ul>",e.forEach(({fecha:e,monto:t,descripcion:r,categoria:o},n)=>{v.innerHTML+=`<li>${e} | ${t} | ${r} | ${o}
      <button class="editar-btn" data-index="${n}">Editar</button>
      <button class="eliminar-btn" data-index="${n}">Eliminar</button>
    </li>`}),v.innerHTML+="</ul>",document.querySelectorAll(".editar-btn").forEach(e=>e.addEventListener("click",e=>{let t=e.target.dataset.index;F(u.obtenerGastos()[t],t)})),document.querySelectorAll(".eliminar-btn").forEach(e=>e.addEventListener("click",e=>{let t=e.target.dataset.index;u.eliminarGasto(t),y(m.obtenerGastosOrdenadosPorFecha()),b()}))};p.addEventListener("submit",e=>{e.preventDefault();let t=document.querySelector("#fecha").value,r=parseFloat(document.querySelector("#monto").value),o=document.querySelector("#descripcion").value,n=document.querySelector("#categoria").value;if(u.registrarGasto(t,r,o,n),L){let e=D.verificarPresupuesto(r);console.log("Resultado de verificación de presupuesto:",e),L.innerHTML=`<p>${e.mensaje}</p>`}else console.error("El elemento #notificaciones no existe en el DOM.");y(m.obtenerGastosOrdenadosPorFecha()),b()});let S=document.querySelector("#ingresos-form"),q=document.querySelector("#ingresos-div"),x=(e=[])=>{q.innerHTML="<ul>",e.forEach(({fecha:e,monto:t,descripcion:r},o)=>{q.innerHTML+=`
      <li>
        ${e} | ${t} | ${r}
        <button class="editar-btn" data-index="${o}">Editar</button>
        <button class="eliminar-btn" data-index="${o}">Eliminar</button>
      </li>`}),q.innerHTML+="</ul>",document.querySelectorAll(".editar-btn").forEach(e=>e.addEventListener("click",e=>{let t=e.target.dataset.index;E(d.obtenerIngresos()[t],t)})),document.querySelectorAll(".eliminar-btn").forEach(e=>e.addEventListener("click",e=>{let t=e.target.dataset.index;d.eliminarIngreso(t),G()}))};S.addEventListener("submit",e=>{e.preventDefault();let t=document.querySelector("#fecha-ingreso").value,r=parseFloat(document.querySelector("#monto-ingreso").value),o=document.querySelector("#fuente-ingreso").value;d.registrarIngreso(t,r,o),G()});let E=(e,t)=>{document.querySelector("#fecha-ingreso").value=e.fecha,document.querySelector("#monto-ingreso").value=e.monto,document.querySelector("#fuente-ingreso").value=e.descripcion;let r=document.querySelector("#guardar-cambios-btn");r||((r=document.createElement("button")).id="guardar-cambios-btn",r.textContent="Guardar Cambios",S.appendChild(r)),r.onclick=e=>{e.preventDefault();let o=document.querySelector("#fecha-ingreso").value,n=parseFloat(document.querySelector("#monto-ingreso").value),a=document.querySelector("#fuente-ingreso").value;d.editarIngreso(t,{fecha:o,monto:n,descripcion:a}),G(),S.reset(),r.remove()}},G=()=>{x(d.obtenerIngresos()),b()};document.querySelector("#filtrar-categoria-btn").addEventListener("click",()=>{let e=document.querySelector("#filtro-categoria").value;y(m.filtrarGastosPorCategoria(e))}),document.querySelector("#filtrar-fechas-btn").addEventListener("click",()=>{let e=document.querySelector("#fecha-inicio").value,t=document.querySelector("#fecha-fin").value;y(m.filtrarGastosPorRangoFecha(e,t))});let I=document.querySelector("#presupuesto-form"),w=document.querySelector("#presupuesto-div"),L=document.querySelector("#notificaciones"),D=new s.default;I.addEventListener("submit",e=>{e.preventDefault();let t=parseFloat(document.querySelector("#monto-presupuesto").value);D.agregarMonto(t),w.innerHTML=`<p>${D.mostrarMonto()}</p>`}),document.querySelector("#mostrar-todos-btn").addEventListener("click",()=>{y(u.obtenerGastos())}),document.querySelector("#filtrar-descripcion-btn").addEventListener("click",()=>{let e=document.querySelector("#filtrar-descripcion").value;x(h.filtrarIngresosPorDescripcion(e))}),document.querySelector("#filtrar-fechas-ingreso-btn").addEventListener("click",()=>{let e=document.querySelector("#fecha-ingreso-inicio").value,t=document.querySelector("#fecha-ingreso-fin").value;x(h.filtrarIngresosPorRangoFecha(e,t))}),document.querySelector("#mostrar-todos-ingresos-btn").addEventListener("click",()=>{x(h.obtenerIngresosOrdenadosPorFecha())});let F=(e,t)=>{document.querySelector("#fecha").value=e.fecha,document.querySelector("#monto").value=e.monto,document.querySelector("#descripcion").value=e.descripcion,document.querySelector("#categoria").value=e.categoria;let r=document.querySelector("#guardar-cambios-btn");r||((r=document.createElement("button")).id="guardar-cambios-btn",r.textContent="Guardar Cambios",p.appendChild(r)),r.onclick=e=>{e.preventDefault();let n=document.querySelector("#fecha").value,a=parseFloat(document.querySelector("#monto").value),s=document.querySelector("#descripcion").value,c=document.querySelector("#categoria").value;u.editarGasto(t,{fecha:n,monto:a,descripcion:s,categoria:c}),o(),p.reset(),r.remove()};let o=()=>{y(u.obtenerGastos()),b()};document.querySelector("#exportar-excel-btn").addEventListener("click",()=>{let e=new Blob([u.exportarGastosaExcel()],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="gastos.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)})};document.querySelector("#generar-balances-fechas-btn").addEventListener("click",()=>{let e=document.querySelector("#fecha-balance-inicio").value,t=document.querySelector("#fecha-balance-fin").value;if(!e||!t){console.error("Debe ingresar un rango de fechas válido.");return}let r=new l.default(m,d).calcularBalancesPorFechas(e,t),o=document.querySelector("#balances-fechas-div");if(!o){console.error("El contenedor #balances-fechas-div no existe.");return}o.innerHTML=`
    <p><strong>Historial de Balances:</strong></p>
    <ul>
      <li>Desde: ${r.fechaInicio}</li>
      <li>Hasta: ${r.fechaFin}</li>
      <li>Total Ingresos: ${r.totalIngresos.toFixed(2)}</li>
      <li>Total Gastos: ${r.totalGastos.toFixed(2)}</li>
      <li>Balance: ${r.balance.toFixed(2)}</li>
    </ul>
  `})}),r("e3h3F",function(t,r){e(t.exports,"default",()=>o);var o=class{constructor(e,t){this.gastos=e,this.ingresos=t}calcularBalance(){return this.ingresos.obtenerIngresos().reduce((e,t)=>e+t.monto,0)-this.gastos.obtenerGastos().reduce((e,t)=>e+t.monto,0)}}}),r("bOScl",function(r,o){e(r.exports,"default",()=>a);var n=t("4I93b"),a=class{constructor(){this.gastos=[]}registrarGasto(e,t,r,o){let a=new n.default(e,t,r,o);this.gastos.push(a)}obtenerGastos(){return this.gastos}obtenerGastosOrdenados(){return this.gastos.sort((e,t)=>new Date(t.fecha)-new Date(e.fecha))}editarGasto(e,t){this.gastos[e]&&(this.gastos[e]=new n.default(t.fecha,t.monto,t.descripcion,t.categoria))}eliminarGasto(e){this.gastos[e]&&this.gastos.splice(e,1)}exportarGastosaExcel(){let e="Fecha,Monto,Descripción,Categoría\n";return this.gastos.forEach(t=>{e+=`${t.fecha},${t.monto},${t.descripcion},${t.categoria}
`}),e}}}),r("4I93b",function(t,r){e(t.exports,"default",()=>o);var o=class{constructor(e,t,r,o){this.fecha=e,this.monto=t,this.descripcion=r,this.categoria=o}}}),r("Z8IgN",function(r,o){e(r.exports,"default",()=>a);var n=t("9HzyH"),a=class{constructor(){this.ingresos=[]}registrarIngreso(e,t,r){let o=new n.default(e,t,r);this.ingresos.push(o)}obtenerIngresos(){return this.ingresos}obtenerIngresosOrdenados(){return this.ingresos.sort((e,t)=>new Date(t.fecha)-new Date(e.fecha))}editarIngreso(e,t){this.ingresos[e]&&(this.ingresos[e]=new n.default(t.fecha,t.monto,t.descripcion))}eliminarIngreso(e){this.ingresos[e]&&this.ingresos.splice(e,1)}}}),r("9HzyH",function(t,r){e(t.exports,"default",()=>o);var o=class{constructor(e,t,r){this.fecha=e,this.monto=t,this.descripcion=r}}}),r("klC2j",function(t,r){e(t.exports,"default",()=>o);var o=class{constructor(){this.monto=null}agregarMonto(e){this.monto=e}mostrarMonto(){return`Monto: ${this.monto}`}verificarCercania(e){let t=e/this.monto*100;return t>=90&&t<=100}verificarPresupuesto(e){if(console.log("Presupuesto actual:",this.monto,"Gasto recibido:",e),!this.monto)return{estado:"sin_presupuesto",mensaje:"No se ha definido un presupuesto aún."};if(e>this.monto)return{estado:"excedido",mensaje:"¡Has excedido el presupuesto general!"};let t=e/this.monto*100;return t>=90&&t<=100?{estado:"cercano",mensaje:"¡Estás cerca de exceder tu presupuesto general!"}:{estado:"dentro",mensaje:"El gasto está dentro del presupuesto."}}}}),r("3OX67",function(r,o){e(r.exports,"default",()=>n),t("bOScl");var n=class{constructor(e){this.gastos=e}obtenerGastosOrdenadosPorFecha(){return this.gastos.obtenerGastos().sort((e,t)=>new Date(e.fecha)-new Date(t.fecha))}filtrarGastosPorCategoria(e){return this.gastos.obtenerGastos().filter(t=>t.categoria===e)}filtrarGastosPorRangoFecha(e,t){return this.gastos.obtenerGastos().filter(r=>{let o=new Date(r.fecha);return o>=new Date(e)&&o<=new Date(t)})}}}),r("bt1BM",function(r,o){e(r.exports,"default",()=>n),t("Z8IgN");var n=class{constructor(e){this.ingresos=e}obtenerIngresosOrdenadosPorFecha(){return this.ingresos.obtenerIngresos().sort((e,t)=>new Date(e.fecha)-new Date(t.fecha))}filtrarIngresosPorRangoFecha(e,t){return this.ingresos.obtenerIngresos().filter(r=>{let o=new Date(r.fecha);return o>=new Date(e)&&o<=new Date(t)})}filtrarIngresosPorDescripcion(e){return this.ingresos.obtenerIngresos().filter(t=>t.descripcion.includes(e))}}}),r("021eu",function(t,r){e(t.exports,"default",()=>o);var o=class{constructor(e,t){this.historial=e,this.ingresos=t}calcularBalancesPorFechas(e,t){let r=this.historial.filtrarGastosPorRangoFecha(e,t),o=this.ingresos.obtenerIngresos().filter(r=>{let o=new Date(r.fecha);return o>=new Date(e)&&o<=new Date(t)}),n=r.reduce((e,t)=>e+t.monto,0),a=o.reduce((e,t)=>e+t.monto,0);return{fechaInicio:e,fechaFin:t,totalGastos:n,totalIngresos:a,balance:a-n}}}});
//# sourceMappingURL=presenter.a2878c3a.js.map
